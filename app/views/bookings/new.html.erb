<% title @bookings_title %>
<% description @bookings_description %>

<section class="row wrapper-car-details">
  <div class="container">
    <div class="row car-dt">
      <div class="col-sm-12 col-md-8 col-xs-12 car-images fleet">
      </div>
    </div>
    <div id='hello'>
      <app>
      </app>
    </div>
    <%# Поставить = %>
    <% form_for @booking, class:"row", url: bookings_path, html: {multipart: true}  do |f| %>
      <div class="col-sm-8">
        <div class="row">
          <div class="form-group col-sm-12">
            <h5 class="this-label">Выбранный автомобиль </h5>
            <% if @car %>
              <%= f.text_field :car, placeholder: "#{@car.car_name}" , class: "form-control", disabled: true %>
              <%= f.hidden_field :car, value: @car.car_name %>
            <% else %>
              <%= f.select :car, options_for_select(@cars.sort_by { |obj| obj.id }.collect{ |u| [u.car_name, u.id] }, selected: @booking.car), prompt: "Выберите автомобиль" %>
            <% end %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Имя <span>*</span></h5>
            <%= f.text_field :firstname, placeholder: "Введите имя", class: "form-control", required: true %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Фамилия <span>*</span></h5>
            <%= f.text_field :lastname, placeholder: "Введите фамилию", class: "form-control", required: true %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Email </h5>
            <%= f.text_field :email, placeholder: "Введите Email", class: "form-control", required: true %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Телефон <span>*</span></h5>
            <%= f.text_field :phone, placeholder: "Введите Телефон", class: "form-control", required: true %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Дата начала <span>*</span></h5>
            <%= f.text_field :start_date, placeholder: "Дата начала", id:"reservation_start_date", class: "datepicker form-control" %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Дата окончания <span>*</span></h5>
            <%= f.text_field :end_date, placeholder: "Дата окончания", id:"reservation_end_date", class: "datepicker form-control", disabled: "true" %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Место получения автомобиля <span>*</span></h5>
            <%= f.select(:location_start, options_for_select([['Офис (бесплатно)', 'Офис'], ['Аэропорт - 400 руб', 'Аэропорт'], ['Светлогорск - 1000 руб', 'Светлогорск'], ['Зеленоградск - 800 руб', 'Зеленоградск'], ['Другой адрес в Калининграде  - 300 руб', 'Другой адрес в Калининграде']]), {prompt: "Выберите место"}, {required: true}) %>
          </div>
          <div class="form-group col-sm-6">
            <h5 class="this-label">Место возврата автомобиля <span>*</span></h5>
            <%= f.select(:location_end, options_for_select([['Офис (бесплатно)', 'Офис'], ['Аэропорт - 400 руб', 'Аэропорт'], ['Светлогорск - 1000 руб', 'Светлогорск'], ['Зеленоградск - 800 руб', 'Зеленоградск'], ['Другой адрес в Калининграде - 300 руб', 'Другой адрес в Калининграде']]), {prompt: "Выберите место"}, {required: true}) %>
          </div>
          <div class="form-group col-sm-12">
            <h5 class="this-label">Дополнительные опции</h5>
            <span style="display: inline;"><%= f.check_box :baby_chair %> Детское кресло <%= f.check_box :navigator %> Навигатор</span>
          </div>
          <div class="form-group col-sm-12">
            <h5 class="this-label">Подтвердите согласие <span>*</span></h5>
            <%= f.check_box :accept, {required: true} %> Даю согласие на обработку персональных данных, согласно <a href="http://base.garant.ru/12148567/" rel="nofollow">152-ФЗ</a>
          </div>
          <div class="form-group col-sm-12">
            <details>
              <summary class="summary-booking"><span style="font-size: 120%;font-weight: bold; color:#f77d0a;">Чтобы оформление документов было быстрее, загрузите сканы документов</span></summary>
              <span class="btn btn-default btn-file">
                <i class="fa fa-cloud-upload" aria-hidden="true"></i> Загрузите паспорт
                <%= f.file_field :avatar %>
              </span>
              <span class="btn btn-default btn-file">
                <i class="fa fa-cloud-upload" aria-hidden="true"></i> Загрузите права
                <%= f.file_field :prava %>
              </span>
            </details>
          </div>
        </div>
        <%= @bookings_bottom_text.html_safe  %>
      </div>
      <div class="col-sm-4">
        <div class="your-order row m0">
          <h4 class="this-heading">Стоимость</h4>
          <div class="row order-data">
            <div class="media name-of-car">
              <div class="media-left media-middle"><span>Название</span></div>
              <div class="media-body" id="car_name">
                <% if @car %>
                  <%= @car.car_name %>
                <% end %>
              </div>
            </div>
            <ul class="nav other-infos-car">
              <li>Цена (за сутки) <span id="car_price"></span></li>
              <li>Всего суток<span id="car_days"></span></li>
              <li id="extra_options">Дополнительные опции <span id="extra_price"></span></li>
              <li style="color: red;">Итого <span id="total_price"></span></li>
              <li>Залог <span id="deposit_price">
                <% if @car %>
                  <%= @car.deposit %> руб
                <% end %>
              </span></li>
            </ul>
          </div>
          <%= f.submit "ОТПРАВИТЬ ЗАЯВКУ", class: "btn btn-primary btn-block", id: "btn_book", disabled: true %>
        </div>
      </div>
    <% end %>
  </div>
</section>
<%= render 'shared/footer' %>
